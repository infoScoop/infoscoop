<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
	"-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >

<hibernate-mapping package="org.infoscoop.dao.model">
	<class
		name="Square"
		table="IS_SQUARES"
	>
		<meta attribute="sync-DAO">false</meta>
		<id
			name="Id"
			type="string"
			column="ID"
		>
		</id>

		<property
			name="name"
			column="name"
			type="string"
			not-null="true"
			length="256"
		/>
        <property
            name="description"
            column="description"
            type="string"
            not-null="true"
        />
		<property
			name="lastmodified"
			column="lastmodified"
			type="timestamp"
			not-null="true"
			length="26"
		/>
		<property
				name="owner"
				column="owner"
				type="string"
				not-null="true"
				length="150"
				/>
		<property
				name="maxUserNum"
				column="max_user_num"
				type="int"
				not-null="true"
				/>
		<property
				name="parentSquareId"
				column="parent_square_id"
				type="string"
				length="64"
				/>
        <property
                name="squareStatus"
                column="square_status"
                type="string"
                length="64"
                />
	</class>
	
    <query name="is_squares.serviceIdList">
        <![CDATA[
select distinct sq.parentSquareId
  from Square as sq, AccountSquare as acsq
  where sq.Id=acsq.squareId
  and sq.parentSquareId<>'default'
  and acsq.accountId=:accountId
        ]]>
    </query>
</hibernate-mapping>